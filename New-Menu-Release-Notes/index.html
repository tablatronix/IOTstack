
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Docker stack for getting started on IOT on the Raspberry PI">
      
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.7">
    
    
      
        <title>New IOTstack Menu - IOTstack</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.19753c6b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.196e0c26.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#new-iotstack-menu" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="IOTstack" class="md-header-nav__button md-logo" aria-label="IOTstack">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            IOTstack
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              New IOTstack Menu
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="IOTstack" class="md-nav__button md-logo" aria-label="IOTstack">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    IOTstack
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      IOT Stack
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Accessing-your-Device-from-the-internet/" class="md-nav__link">
      Accessing your device from the internet
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Backup-and-Restore/" class="md-nav__link">
      Backing up and restoring IOTstack
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../BuildStack-RandomPassword/" class="md-nav__link">
      Build Stack Random Services Passowrd
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../BuildStack-Services/" class="md-nav__link">
      Buid Stack Services system
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Contributing-Services/" class="md-nav__link">
      Contributing a service to IOTstack
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Custom/" class="md-nav__link">
      Custom services and overriding default settings for IOTstack
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Default-Configs/" class="md-nav__link">
      Build Stack Default Passwords for Services
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Docker-commands/" class="md-nav__link">
      Docker commands
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Getting-Started/" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Home/" class="md-nav__link">
      Wiki
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../How-the-script-works/" class="md-nav__link">
      How the script works
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Menu-System/" class="md-nav__link">
      Menu system
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Misc/" class="md-nav__link">
      Miscellaneous
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Native-RTL_433/" class="md-nav__link">
      Native RTL_433
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Networking/" class="md-nav__link">
      Networking
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        New IOTstack Menu
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      New IOTstack Menu
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#on-going-improvements" class="md-nav__link">
    On-going improvements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#breaking-changes" class="md-nav__link">
    Breaking changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#full-change-list" class="md-nav__link">
    Full change list
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../PostBuild-Script/" class="md-nav__link">
      Postbuild BASH Script
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../RPIEasy_native/" class="md-nav__link">
      RPIEasy
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Understanding-Containers/" class="md-nav__link">
      Letâ€™s begin by understanding, What is Docker?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Updating-the-Project/" class="md-nav__link">
      Updating the project
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Zigbee2mqttassistant/" class="md-nav__link">
      Zigbee2Mqtt Assistant
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-23" type="checkbox" id="nav-23" >
    <label class="md-nav__link" for="nav-23">
      Containers
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Containers" data-md-level="1">
      <label class="md-nav__title" for="nav-23">
        <span class="md-nav__icon md-icon"></span>
        Containers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Adminer/" class="md-nav__link">
      Adminer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Blynk_server/" class="md-nav__link">
      Blynk server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/DashMachine/" class="md-nav__link">
      DashMachine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/EspruinoHub/" class="md-nav__link">
      Espruinohub
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Grafana/" class="md-nav__link">
      Grafana
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Heimdall/" class="md-nav__link">
      Heimdall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Home-Assistant/" class="md-nav__link">
      Home assistant
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Homer/" class="md-nav__link">
      Homer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/InfluxDB/" class="md-nav__link">
      InfluxDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/MariaDB/" class="md-nav__link">
      MariaDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Mosquitto/" class="md-nav__link">
      Mosquitto
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/MotionEye/" class="md-nav__link">
      MotionEye
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/NextCloud/" class="md-nav__link">
      Next Cloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Node-RED/" class="md-nav__link">
      Node-RED
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Pi-hole/" class="md-nav__link">
      Pi-hole
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Plex/" class="md-nav__link">
      Plex
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Portainer-agent/" class="md-nav__link">
      Portainer agent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Portainer-ce/" class="md-nav__link">
      Portainer CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Portainer/" class="md-nav__link">
      Portainer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/PostgreSQL/" class="md-nav__link">
      PostgreSQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Python/" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/RTL_433-docker/" class="md-nav__link">
      RTL_433 Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/TasmoAdmin/" class="md-nav__link">
      TasmoAdmin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/WireGuard/" class="md-nav__link">
      WireGuard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/Zigbee2MQTT/" class="md-nav__link">
      Zigbe2MQTT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/deconz/" class="md-nav__link">
      deCONZ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/diyHue/" class="md-nav__link">
      DIY hue
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/openHAB/" class="md-nav__link">
      Openhab
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Containers/x2go/" class="md-nav__link">
      x2go
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#on-going-improvements" class="md-nav__link">
    On-going improvements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#breaking-changes" class="md-nav__link">
    Breaking changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#full-change-list" class="md-nav__link">
    Full change list
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="new-iotstack-menu">New IOTstack Menu</h1>
<h2 id="background">Background</h2>
<p>Originally this script was written in bash. After a while it became obvious that bash wasn't well suited to dealing with all the different types of configuration files, and logic that goes with configuring everything. IOTstack needs to be accessible to all levels of programmers and tinkerers, not just ones experienced with Linux and bash. For this reason, it was rewritten in Python since the language syntax is easier to understand, and is more commonly used for scripting and programming than bash. Bash is still used in IOTstack where it makes sense to use it, but the menu system itself uses Python. The code is intentionally made so that beginners and experienced programmers could contribute to the project. We are always open to improvements if you have suggestions.</p>
<h2 id="on-going-improvements">On-going improvements</h2>
<p>There are many features that are needing to be introduced into the new menu system. From meta tags on services for filtering, to optional nginx autoconfiguration and authentication. For this reason you may initially experience bugs (very hard to test every type of configuration!). The new menu system has been worked on and tested for 6 months and we think it's stable enough to merge into the master branch for mainstream usage. The code still needs some work to make it easier to add new services and to not require copy pasting the same code for each new service. Also to make the menu system not be needed at all (so it can be automated with bash scripts).</p>
<h2 id="breaking-changes">Breaking changes</h2>
<p>There are a few changes that you need to be aware of:
* Docker Environmental <code>*.env</code> files are no longer a thing by default. Everything needed is specified in the service.yml file, you can still optionally use them though either with <a href="https://sensorsiot.github.io/IOTstack/Custom">Custom Overrides</a> or with the <a href="https://sensorsiot.github.io/IOTstack/PostBuild-Script">PostBuild</a> script. Specific config files for certain services still work as they once did.
* Python 3, pip3, PyYAML and Blessed are all required to be installed.
* Not backwards compatible with old menu system. You will be able to switch back to the old menu system for a period of time by changing to the <code>old-menu</code> branch. It will be unmaintained except for critical updates. It will eventually be removed - but not before everyone is ready to leave it.</p>
<p><strong>Test that your backups are working before you switch.</strong> The <code>old-menu</code> branch will become avaiable just before the new menu is merged into master to ensure it has the latest commits applied.</p>
<h2 id="full-change-list">Full change list</h2>
<ul>
<li>Menu and everything that goes with it rewritten in Python and Blessed</li>
<li>Easy installation script</li>
<li>All services rewritten to be compatible with PyYAML</li>
<li>Optional port selection for services</li>
<li>Issue checking for services before building</li>
<li>Options for services now in menu (no more editing <code>service.yml</code> files)</li>
<li>Automatic password generation for each service</li>
<li>Pre and post scripts for customising services</li>
<li>Removed env files</li>
<li>Backup and restoring more streamlined</li>
<li>Documentation updated for all services</li>
<li>No longer needs to be installed in the home directory <code>~</code>.</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../Networking/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Networking
              </div>
            </div>
          </a>
        
        
          <a href="../PostBuild-Script/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Postbuild BASH Script
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.0ac82a11.min.js"></script>
      <script src="../assets/javascripts/bundle.f81dfb4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ['tabs'],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>